#!/bin/bash

conf=""
feature=""
label=""
model=""
output=""
num=0
jar=""
while true  
do
    case "$1" in
         -conf)
            conf="$2"
            echo "conf: $conf"
            shift
            ;;  
         -feature)
            feature="$2"
            echo "feature: $feature"
            shift  
            ;;
         -label)
            label="$2"
            echo "label: $label"
            shift
            ;;
         -model)
            model="$2"
            echo "model: $model"
            shift
            ;;
         -output)
            output="$2"
            echo "output: $output"
            shift  
            ;;
         -num)
            num="$2"
            echo "num: $num"
            shift
            ;;
         -jar)
            jar="$2"
            echo "jar path: $jar"
            shift  
            ;;  
         *)  
            shift  
         break 
         ;;
    esac
shift
done

CLIENT_MAIN_CLASS="org.apache.hadoop.yarn.applications.caffe.Client"

yarn jar $jar $CLIENT_MAIN_CLASS \
         --jar $jar \
         --conf $conf \
         --feature $feature \
         --label $label \
         --model $model \
         --output $output \
         --num $num \
         --container_memory 4096

